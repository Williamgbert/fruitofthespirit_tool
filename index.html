<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fruit of the Spirit Reflection Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'garamond': ['EB Garamond', 'serif'],
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen transition-colors duration-300" id="body">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header with Scripture -->
        <div class="text-center mb-8 md:mb-12">
            <div class="relative mb-4 md:mb-6">
                <h1 class="font-garamond text-2xl sm:text-3xl md:text-4xl font-semibold text-slate-800 dark:text-slate-200 leading-tight text-center">
                    Fruit of the Spirit
                </h1>
                <button onclick="toggleDarkMode()" class="absolute top-0 right-0 p-2 rounded-lg bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors touch-manipulation">
                    <span id="theme-icon">ðŸŒ™</span>
                </button>
            </div>
            <div class="font-garamond text-base sm:text-lg md:text-xl text-slate-600 dark:text-slate-400 leading-relaxed max-w-4xl mx-auto px-2">
                <em>"But the fruit of the Spirit is love, joy, peace, patience, kindness, goodness, faithfulness, gentleness, self-control; against such things there is no law."</em>
                <div class="mt-2 text-sm font-medium">â€” Galatians 5:22-23</div>
            </div>
        </div>

        <!-- Fruits Grid -->
        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 mb-6 md:mb-8" id="fruitsGrid">
            <!-- Fruits will be generated by JavaScript -->
        </div>

        <!-- Reflection Modal -->
        <div id="reflectionModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-2 sm:p-4">
            <div class="bg-white dark:bg-slate-800 rounded-2xl max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto">
                <div class="p-4 sm:p-6">
                    <div class="flex justify-between items-center mb-4 sm:mb-6">
                        <h2 id="modalTitle" class="font-garamond text-xl sm:text-2xl font-semibold text-slate-800 dark:text-slate-200"></h2>
                        <button onclick="closeModal()" class="text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 text-2xl p-1 touch-manipulation">Ã—</button>
                    </div>
                    
                    <div id="modalContent" class="space-y-4 sm:space-y-6">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Modal -->
        <div id="exportModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-2 sm:p-4">
            <div class="bg-white dark:bg-slate-800 rounded-2xl max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto">
                <div class="p-4 sm:p-6">
                    <div class="flex justify-between items-center mb-4 sm:mb-6">
                        <h2 class="font-garamond text-xl sm:text-2xl font-semibold text-slate-800 dark:text-slate-200">Export Reflections</h2>
                        <button onclick="closeExportModal()" class="text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 text-2xl p-1 touch-manipulation">Ã—</button>
                    </div>
                    
                    <div class="space-y-4">
                        <textarea id="exportText" class="w-full h-48 sm:h-64 p-3 sm:p-4 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-inter text-sm" readonly></textarea>
                        <button onclick="copyToClipboard()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 sm:px-6 rounded-lg font-inter font-medium transition-colors touch-manipulation">
                            Copy to Clipboard
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Button -->
        <div class="text-center">
            <button onclick="showExportModal()" class="bg-slate-600 hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600 text-white py-3 px-4 sm:px-6 rounded-lg font-inter font-medium transition-colors touch-manipulation">
                Export All Reflections
            </button>
        </div>
    </div>

    <script>
        const fruits = [
            {
                name: 'Love',
                color: 'rose',
                icon: 'ðŸ’•',
                commentary: 'Love is the foundation of all spiritual fruit. It is not merely emotion, but a deliberate choice to seek the good of others, reflecting God\'s unconditional love for us.',
                prompts: [
                    'How did you show love to someone today?',
                    'Where did you receive unexpected love?',
                    'What made it difficult to love today?'
                ]
            },
            {
                name: 'Joy',
                color: 'yellow',
                icon: 'âœ¨',
                commentary: 'Joy transcends circumstances. It is the deep contentment that comes from knowing God\'s presence and promises, even in difficult times.',
                prompts: [
                    'What brought you genuine joy today?',
                    'How did you share joy with others?',
                    'When did you choose joy over worry?'
                ]
            },
            {
                name: 'Peace',
                color: 'blue',
                icon: 'ðŸ•Šï¸',
                commentary: 'Peace is the calm assurance of God\'s sovereignty. It guards our hearts and minds, allowing us to rest in His control over all circumstances.',
                prompts: [
                    'Where did you experience God\'s peace today?',
                    'How did you bring peace to a tense situation?',
                    'What disturbed your peace, and how did you respond?'
                ]
            },
            {
                name: 'Patience',
                color: 'amber',
                icon: 'â³',
                commentary: 'Patience is love extended over time. It reflects God\'s long-suffering nature toward us and enables us to endure difficulties with grace.',
                prompts: [
                    'When was your patience tested today?',
                    'How did patience help you respond better?',
                    'Where do you need more patience tomorrow?'
                ]
            },
            {
                name: 'Kindness',
                color: 'green',
                icon: 'ðŸ¤',
                commentary: 'Kindness is love in action. It seeks opportunities to serve and bless others, reflecting the tender mercy God shows us daily.',
                prompts: [
                    'How did you show kindness to someone today?',
                    'What act of kindness did you receive?',
                    'Who needs your kindness tomorrow?'
                ]
            },
            {
                name: 'Goodness',
                color: 'emerald',
                icon: 'ðŸŒŸ',
                commentary: 'Goodness is moral excellence that flows from a heart transformed by God. It seeks what is right and beneficial for others.',
                prompts: [
                    'How did you choose what was good today?',
                    'Where did you see goodness in others?',
                    'What good can you do tomorrow?'
                ]
            },
            {
                name: 'Faithfulness',
                color: 'purple',
                icon: 'ðŸ›¡ï¸',
                commentary: 'Faithfulness is steadfast loyalty and reliability. It mirrors God\'s unchanging character and builds trust in our relationships.',
                prompts: [
                    'How were you faithful to your commitments today?',
                    'Where did you see God\'s faithfulness?',
                    'What requires your faithfulness tomorrow?'
                ]
            },
            {
                name: 'Gentleness',
                color: 'pink',
                icon: 'ðŸŒ¸',
                commentary: 'Gentleness is strength under control. It approaches others with humility and tenderness, creating space for healing and growth.',
                prompts: [
                    'How did you respond gently to someone today?',
                    'When did gentleness make a difference?',
                    'Where do you need more gentleness?'
                ]
            },
            {
                name: 'Self-Control',
                color: 'indigo',
                icon: 'âš–ï¸',
                commentary: 'Self-control is the discipline to align our actions with our values. It enables us to resist temptation and choose what honors God.',
                prompts: [
                    'Where did you exercise self-control today?',
                    'What temptation did you overcome?',
                    'What area needs more discipline tomorrow?'
                ]
            }
        ];

        let currentFruit = null;
        let isDarkMode = localStorage.getItem('darkMode') === 'true';

        // Initialize the app
        function init() {
            if (isDarkMode) {
                document.documentElement.classList.add('dark');
                document.getElementById('theme-icon').textContent = 'â˜€ï¸';
            }
            renderFruits();
        }

        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            localStorage.setItem('darkMode', isDarkMode);
            document.documentElement.classList.toggle('dark');
            document.getElementById('theme-icon').textContent = isDarkMode ? 'â˜€ï¸' : 'ðŸŒ™';
        }

        function renderFruits() {
            const grid = document.getElementById('fruitsGrid');
            grid.innerHTML = '';

            fruits.forEach((fruit, index) => {
                const hasReflection = localStorage.getItem(`reflection_${fruit.name.toLowerCase()}`) !== null;
                
                const fruitCard = document.createElement('div');
                fruitCard.className = `
                    relative cursor-pointer group transition-all duration-300 transform hover:scale-105 active:scale-95
                    bg-${fruit.color}-50 dark:bg-${fruit.color}-900/20 
                    border-2 border-${fruit.color}-200 dark:border-${fruit.color}-700
                    hover:border-${fruit.color}-400 dark:hover:border-${fruit.color}-500
                    rounded-2xl p-3 sm:p-4 md:p-6 text-center
                    hover:shadow-lg hover:shadow-${fruit.color}-200/50 dark:hover:shadow-${fruit.color}-900/50
                    touch-manipulation
                `;
                
                fruitCard.innerHTML = `
                    <div class="text-2xl sm:text-3xl md:text-4xl mb-2 sm:mb-3">${fruit.icon}</div>
                    <h3 class="font-garamond text-sm sm:text-base md:text-lg font-semibold text-${fruit.color}-800 dark:text-${fruit.color}-200 mb-2 leading-tight">
                        ${fruit.name}
                    </h3>
                    ${hasReflection ? 
                        `<div class="w-2 h-2 bg-${fruit.color}-500 rounded-full mx-auto"></div>` : 
                        `<div class="w-2 h-2 bg-slate-300 dark:bg-slate-600 rounded-full mx-auto"></div>`
                    }
                `;
                
                fruitCard.onclick = () => openReflection(fruit);
                grid.appendChild(fruitCard);
            });
        }

        function openReflection(fruit) {
            currentFruit = fruit;
            const modal = document.getElementById('reflectionModal');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');
            
            title.textContent = fruit.name;
            title.className = `font-garamond text-2xl font-semibold text-${fruit.color}-800 dark:text-${fruit.color}-200`;
            
            const savedReflection = localStorage.getItem(`reflection_${fruit.name.toLowerCase()}`) || '';
            
            content.innerHTML = `
                <div class="bg-${fruit.color}-50 dark:bg-${fruit.color}-900/20 p-3 sm:p-4 rounded-lg border border-${fruit.color}-200 dark:border-${fruit.color}-700">
                    <h4 class="font-inter font-medium text-${fruit.color}-800 dark:text-${fruit.color}-200 mb-2">Reflection</h4>
                    <p class="font-inter text-sm text-slate-700 dark:text-slate-300 leading-relaxed">${fruit.commentary}</p>
                </div>
                
                <div>
                    <h4 class="font-inter font-medium text-slate-800 dark:text-slate-200 mb-3">Reflection Prompts</h4>
                    <ul class="space-y-2">
                        ${fruit.prompts.map(prompt => `
                            <li class="font-inter text-sm text-slate-600 dark:text-slate-400 flex items-start">
                                <span class="text-${fruit.color}-500 mr-2 flex-shrink-0">â€¢</span>
                                <span>${prompt}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-inter font-medium text-slate-800 dark:text-slate-200 mb-3">Your Reflection</h4>
                    <textarea 
                        id="reflectionText" 
                        placeholder="Write your thoughts and reflections here..."
                        class="w-full h-24 sm:h-32 p-3 sm:p-4 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-inter text-sm resize-none focus:ring-2 focus:ring-${fruit.color}-500 focus:border-transparent"
                    >${savedReflection}</textarea>
                    <div class="flex flex-col sm:flex-row gap-3 mt-4">
                        <button 
                            onclick="saveReflection()" 
                            class="flex-1 bg-${fruit.color}-600 hover:bg-${fruit.color}-700 text-white py-3 px-4 rounded-lg font-inter font-medium transition-colors touch-manipulation"
                        >
                            Save Reflection
                        </button>
                        <button 
                            onclick="clearReflection()" 
                            class="px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg font-inter font-medium transition-colors touch-manipulation"
                        >
                            Clear
                        </button>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('reflectionModal').classList.add('hidden');
            currentFruit = null;
        }

        function saveReflection() {
            if (!currentFruit) return;
            
            const text = document.getElementById('reflectionText').value;
            const key = `reflection_${currentFruit.name.toLowerCase()}`;
            
            if (text.trim()) {
                localStorage.setItem(key, text);
                localStorage.setItem(`${key}_date`, new Date().toISOString());
            } else {
                localStorage.removeItem(key);
                localStorage.removeItem(`${key}_date`);
            }
            
            renderFruits();
            
            // Show success message
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'Saved!';
            button.classList.add('bg-green-600', 'hover:bg-green-700');
            setTimeout(() => {
                button.textContent = originalText;
                button.classList.remove('bg-green-600', 'hover:bg-green-700');
            }, 1500);
        }

        function clearReflection() {
            if (!currentFruit) return;
            
            if (confirm('Are you sure you want to clear this reflection?')) {
                document.getElementById('reflectionText').value = '';
                const key = `reflection_${currentFruit.name.toLowerCase()}`;
                localStorage.removeItem(key);
                localStorage.removeItem(`${key}_date`);
                renderFruits();
            }
        }

        function showExportModal() {
            const modal = document.getElementById('exportModal');
            const textArea = document.getElementById('exportText');
            
            let exportText = 'Fruit of the Spirit Reflections\n';
            exportText += '================================\n\n';
            
            fruits.forEach(fruit => {
                const reflection = localStorage.getItem(`reflection_${fruit.name.toLowerCase()}`);
                const date = localStorage.getItem(`reflection_${fruit.name.toLowerCase()}_date`);
                
                exportText += `${fruit.name.toUpperCase()}\n`;
                exportText += '-'.repeat(fruit.name.length) + '\n';
                
                if (reflection) {
                    if (date) {
                        exportText += `Last updated: ${new Date(date).toLocaleDateString()}\n\n`;
                    }
                    exportText += `${reflection}\n\n`;
                } else {
                    exportText += 'No reflection yet.\n\n';
                }
            });
            
            textArea.value = exportText;
            modal.classList.remove('hidden');
        }

        function closeExportModal() {
            document.getElementById('exportModal').classList.add('hidden');
        }

        function copyToClipboard() {
            const textArea = document.getElementById('exportText');
            textArea.select();
            document.execCommand('copy');
            
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'Copied!';
            button.classList.add('bg-green-600', 'hover:bg-green-700');
            setTimeout(() => {
                button.textContent = originalText;
                button.classList.remove('bg-green-600', 'hover:bg-green-700');
            }, 1500);
        }

        // Close modal when clicking outside
        document.getElementById('reflectionModal').onclick = function(e) {
            if (e.target === this) closeModal();
        };

        document.getElementById('exportModal').onclick = function(e) {
            if (e.target === this) closeExportModal();
        };

        // Initialize app when page loads
        init();
    </script>

    <style>
        body {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        
        .dark body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        .dark ::-webkit-scrollbar-track {
            background: #334155;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        
        .dark ::-webkit-scrollbar-thumb {
            background: #64748b;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }
    </style>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'980a4d226155678d',t:'MTc1ODEyOTkxMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
